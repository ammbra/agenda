<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="~{fragments/common :: common(~{::title}, ~{::script})}">
    <title>To-Do List</title>
    <script src="script.js"></script>
</head>
<body>
<div class="container">
    <h1 class="mt-5">To-Do List</h1>
    <form th:action="@{/add}" th:object="${item}" method="post" class="mb-4"  enctype="multipart/form-data">
        <div class="form-group mb-3">
            <label for="title">Title</label>
            <input type="text" class="form-control" id="title" name="title" required>
        </div>
        <div class="form-group mb-3">
            <label for="description">Description</label>
            <textarea class="form-control" id="description" name="description" required></textarea>
        </div>
        <div class="form-group mb-3">
            <label for="url">URL</label>
            <input class="form-control" id="url" name="url"/>
        </div>
        <div class="form-group mb-3">
            <label for="imageFile">Image:</label>
            <input type="file" id="imageFile" class="form-control" name="imageFile" accept="image/*" oninput="">
        </div>
        <div class="form-group">
            <label for="deadline">Deadline</label>
            <input type="date" class="form-control" id="deadline" name="deadline"  required/>
        </div>
        <br/>
        <button type="submit" class="btn btn-primary">Add To-Do</button>
    </form>

    <table class="table table-bordered">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Title</th>
            <th scope="col">Description</th>
            <th scope="col">URL</th>
            <th scope="col">Image</th>
            <th scope="col">Deadline</th>
            <th scope="col">Remove</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="todo : ${todos}">
            <td th:text="${todo.id}" th:class="${todo.highlight.getContent()}">1</td>
            <td th:text="${todo.title}" th:class="${todo.highlight.getContent()}">Sample Title</td>
            <td th:text="${todo.description}" th:class="${todo.highlight.getContent()}">Sample Description</td>
            <td th:text="${todo.url}" th:class="${todo.highlight.getContent()}">Sample URL</td>
            <td th:class="${todo.highlight.getContent()}">
                <img th:if="${todo.image() != null }" th:src="@{'/image/' + ${todo.id}}" alt="Todo Image" style="width: 100px; height: auto;">
            </td>
            <td th:text="${todo.deadline}" th:class="${todo.highlight.getContent()}"></td>
            <td th:class="${todo.highlight.getContent()}"><a th:href="@{'/'+${todo.id}}" class="btn btn-danger">Delete</a></td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>